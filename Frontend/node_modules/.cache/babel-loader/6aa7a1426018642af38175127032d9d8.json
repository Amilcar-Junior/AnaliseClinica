{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\amilc\\\\Documents\\\\GitHub\\\\AnaliseClinica\\\\Frontend\\\\src\\\\components\\\\Login\\\\InputFile\\\\index.js\";\n\n/**\r\n *\r\n *\r\n * InputFile\r\n *\r\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { cloneDeep } from 'lodash';\nimport ImgPreview from '../ImgPreview';\nimport InputFileDetails from '../InputFileDetails';\nimport './styles.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass InputFile extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      didDeleteFile: false,\n      isUploading: false,\n      position: 0\n    };\n\n    this.addFilesToProps = files => {\n      const initAcc = this.props.multiple ? cloneDeep(this.props.value) : {};\n      const value = Object.keys(files).reduce((acc, current) => {\n        if (this.props.multiple) {\n          acc.push(files[current]);\n        } else if (current === '0') {\n          acc[0] = files[0];\n        }\n\n        return acc;\n      }, initAcc);\n      const target = {\n        name: this.props.name,\n        type: 'file',\n        value\n      };\n      this.setState({\n        isUploading: !this.state.isUploading\n      });\n      this.props.onChange({\n        target\n      });\n    };\n\n    this.handleChange = ({\n      target\n    }) => this.addFilesToProps(target.files);\n\n    this.handleClick = e => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.refs.inputFile.click();\n    };\n\n    this.onDrop = e => {\n      e.preventDefault();\n      this.addFilesToProps(e.dataTransfer.files);\n    };\n\n    this.handleFileDelete = e => {\n      e.preventDefault();\n      e.stopPropagation(); // Remove the file from props\n\n      const value = this.props.multiple ? cloneDeep(this.props.value) : {}; // Remove the file from the array if multiple files upload is enable\n\n      if (this.props.multiple) {\n        value.splice(this.state.position, 1);\n      } // Update the parent's props\n\n\n      const target = {\n        name: this.props.name,\n        type: 'file',\n        value\n      };\n      this.props.onChange({\n        target\n      }); // Update the position of the children\n\n      if (this.props.multiple) {\n        const newPosition = value.length === 0 ? 0 : value.length - 1;\n        this.updateFilePosition(newPosition, value.length);\n      }\n\n      this.setState({\n        didDeleteFile: !this.state.didDeleteFile\n      });\n    };\n\n    this.updateFilePosition = (newPosition, size = this.props.value.length) => {\n      const label = size === 0 ? false : newPosition + 1;\n      this.props.setLabel(label);\n      this.setState({\n        position: newPosition\n      });\n    };\n  }\n\n  render() {\n    const {\n      multiple,\n      name,\n      onChange,\n      value\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(ImgPreview, {\n        didDeleteFile: this.state.didDeleteFile,\n        files: value,\n        isUploading: this.state.isUploading,\n        multiple: multiple,\n        name: name,\n        onChange: onChange,\n        onBrowseClick: this.handleClick,\n        onDrop: this.onDrop,\n        position: this.state.position,\n        updateFilePosition: this.updateFilePosition\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          width: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"inputFile\",\n          multiple: multiple,\n          name: name,\n          onChange: this.handleChange,\n          type: \"file\",\n          ref: \"inputFile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inputFileButtonContainer\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-plus\",\n            style: {\n              marginRight: '10px',\n              marginBottom: '2px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '12px'\n            },\n            children: \"ADD A NEW FILE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputFileDetails, {\n        file: value[this.state.position] || value[0] || value,\n        multiple: multiple,\n        number: value.length,\n        onFileDelete: this.handleFileDelete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nInputFile.defaultProps = {\n  multiple: false,\n  setLabel: () => {},\n  value: []\n};\nInputFile.propTypes = {\n  multiple: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  setLabel: PropTypes.func,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.array])\n};\nexport default InputFile;","map":{"version":3,"sources":["C:/Users/amilc/Documents/GitHub/AnaliseClinica/Frontend/src/components/Login/InputFile/index.js"],"names":["React","PropTypes","cloneDeep","ImgPreview","InputFileDetails","InputFile","Component","state","didDeleteFile","isUploading","position","addFilesToProps","files","initAcc","props","multiple","value","Object","keys","reduce","acc","current","push","target","name","type","setState","onChange","handleChange","handleClick","e","preventDefault","stopPropagation","refs","inputFile","click","onDrop","dataTransfer","handleFileDelete","splice","newPosition","length","updateFilePosition","size","label","setLabel","render","width","marginRight","marginBottom","fontSize","defaultProps","propTypes","bool","string","isRequired","func","oneOfType","object","array"],"mappings":"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","sourcesContent":["/**\r\n *\r\n *\r\n * InputFile\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { cloneDeep } from 'lodash';\r\n\r\nimport ImgPreview from '../ImgPreview';\r\nimport InputFileDetails from '../InputFileDetails';\r\n\r\nimport './styles.scss';\r\n\r\nclass InputFile extends React.Component {\r\n  state = {\r\n    didDeleteFile: false,\r\n    isUploading: false,\r\n    position: 0,\r\n  };\r\n\r\n  addFilesToProps = (files) => {\r\n    const initAcc = this.props.multiple ? cloneDeep(this.props.value) : {};\r\n    const value = Object.keys(files).reduce((acc, current) => {\r\n\r\n      if (this.props.multiple) {\r\n        acc.push(files[current]);\r\n      } else if (current === '0') {\r\n        acc[0] = files[0];\r\n      }\r\n\r\n      return acc;\r\n    }, initAcc)\r\n\r\n    const target = {\r\n      name: this.props.name,\r\n      type: 'file',\r\n      value,\r\n    };\r\n\r\n    this.setState({ isUploading: !this.state.isUploading });\r\n    this.props.onChange({ target });\r\n  }\r\n\r\n  handleChange = ({ target }) => this.addFilesToProps(target.files);\r\n\r\n  handleClick = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    this.refs.inputFile.click();\r\n  }\r\n\r\n  onDrop = (e) => {\r\n    e.preventDefault();\r\n    this.addFilesToProps(e.dataTransfer.files);\r\n  }\r\n\r\n  handleFileDelete = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    // Remove the file from props\r\n    const value = this.props.multiple ? cloneDeep(this.props.value) : {};\r\n\r\n    // Remove the file from the array if multiple files upload is enable\r\n    if (this.props.multiple) {\r\n      value.splice(this.state.position, 1);\r\n    }\r\n    // Update the parent's props\r\n    const target = {\r\n      name: this.props.name,\r\n      type: 'file',\r\n      value,\r\n    };\r\n\r\n    this.props.onChange({ target });\r\n\r\n    // Update the position of the children\r\n    if (this.props.multiple) {\r\n      const newPosition = value.length === 0 ? 0 : value.length - 1;\r\n      this.updateFilePosition(newPosition, value.length);\r\n    }\r\n    this.setState({ didDeleteFile: !this.state.didDeleteFile });\r\n  }\r\n\r\n  updateFilePosition = (newPosition, size = this.props.value.length) => {\r\n    const label = size === 0 ? false : newPosition + 1;\r\n    this.props.setLabel(label);\r\n    this.setState({ position: newPosition });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      multiple,\r\n      name,\r\n      onChange,\r\n      value,\r\n    } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <ImgPreview\r\n          didDeleteFile={this.state.didDeleteFile}\r\n          files={value}\r\n          isUploading={this.state.isUploading}\r\n          multiple={multiple}\r\n          name={name}\r\n          onChange={onChange}\r\n          onBrowseClick={this.handleClick}\r\n          onDrop={this.onDrop}\r\n          position={this.state.position}\r\n          updateFilePosition={this.updateFilePosition}\r\n        />\r\n        <label style={{ width: '100%'}}>\r\n          <input\r\n            className=\"inputFile\"\r\n            multiple={multiple}\r\n            name={name}\r\n            onChange={this.handleChange}\r\n            type=\"file\"\r\n            ref=\"inputFile\"\r\n          />\r\n\r\n          <div className=\"inputFileButtonContainer\">\r\n            <i className=\"fa fa-plus\" style={{ marginRight: '10px', marginBottom: '2px' }} />\r\n            <span style={{ fontSize: '12px' }}>ADD A NEW FILE</span>\r\n          </div>\r\n        </label>\r\n        <InputFileDetails\r\n          file={value[this.state.position] || value[0] || value}\r\n          multiple={multiple}\r\n          number={value.length}\r\n          onFileDelete={this.handleFileDelete}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nInputFile.defaultProps = {\r\n  multiple: false,\r\n  setLabel: () => {},\r\n  value: [],\r\n};\r\n\r\nInputFile.propTypes = {\r\n  multiple: PropTypes.bool,\r\n  name: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n  setLabel: PropTypes.func,\r\n  value: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.object,\r\n    PropTypes.array,\r\n  ]),\r\n};\r\n\r\nexport default InputFile;\r\n"]},"metadata":{},"sourceType":"module"}